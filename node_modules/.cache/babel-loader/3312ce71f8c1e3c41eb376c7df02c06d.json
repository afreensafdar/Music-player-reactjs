{"ast":null,"code":"var _classCallCheck = require(\"C:/Users/safdaaf/Desktop/Bootcamp(Multiverse)/Music-player-reactjs/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/safdaaf/Desktop/Bootcamp(Multiverse)/Music-player-reactjs/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar prefixes = ['webkit'];\n\nvar Grade = /*#__PURE__*/function () {\n  \"use strict\";\n\n  function Grade(container, img_selector, callback) {\n    _classCallCheck(this, Grade);\n\n    this.callback = callback || null;\n    this.container = container;\n    this.image = this.container.querySelector(img_selector) || this.container.querySelector('img');\n    this.gradientData = [];\n\n    if (!this.image || !this.container) {\n      return;\n    }\n\n    this.canvas = document.createElement('canvas');\n    this.ctx = this.canvas.getContext('2d');\n    this.imageDimensions = {\n      width: 0,\n      height: 0\n    };\n    this.imageData = [];\n    this.readImage();\n  }\n\n  _createClass(Grade, [{\n    key: \"readImage\",\n    value: function readImage() {\n      this.imageDimensions.width = this.image.width * 0.1;\n      this.imageDimensions.height = this.image.height * 0.1;\n      this.render();\n    }\n  }, {\n    key: \"getImageData\",\n    value: function getImageData() {\n      var imageData = this.ctx.getImageData(0, 0, this.imageDimensions.width, this.imageDimensions.height).data;\n      this.imageData = Array.from(imageData);\n    }\n  }, {\n    key: \"getChunkedImageData\",\n    value: function getChunkedImageData() {\n      var perChunk = 4;\n      var chunked = this.imageData.reduce(function (ar, it, i) {\n        var ix = Math.floor(i / perChunk);\n\n        if (!ar[ix]) {\n          ar[ix] = [];\n        }\n\n        ar[ix].push(it);\n        return ar;\n      }, []);\n      var filtered = chunked.filter(function (rgba) {\n        return rgba.slice(0, 2).every(function (val) {\n          return val < 250;\n        }) && rgba.slice(0, 2).every(function (val) {\n          return val > 0;\n        });\n      });\n      return filtered;\n    }\n  }, {\n    key: \"getRGBAGradientValues\",\n    value: function getRGBAGradientValues(top) {\n      return top.map(function (color, index) {\n        return \"rgb(\".concat(color.rgba.slice(0, 3).join(','), \") \").concat(index == 0 ? '0%' : '75%');\n      }).join(',');\n    }\n  }, {\n    key: \"getCSSGradientProperty\",\n    value: function getCSSGradientProperty(top) {\n      var val = this.getRGBAGradientValues(top);\n      return prefixes.map(function (prefix) {\n        return \"background-image: -\".concat(prefix, \"-linear-gradient(\\n                        135deg,\\n                        \").concat(val, \"\\n                    )\");\n      }).concat([\"background-image: linear-gradient(\\n                    135deg,\\n                    \".concat(val, \"\\n                )\")]).join(';');\n    }\n  }, {\n    key: \"getMiddleRGB\",\n    value: function getMiddleRGB(start, end) {\n      var w = 0.5 * 2 - 1;\n      var w1 = (w + 1) / 2.0;\n      var w2 = 1 - w1;\n      var rgb = [parseInt(start[0] * w1 + end[0] * w2), parseInt(start[1] * w1 + end[1] * w2), parseInt(start[2] * w1 + end[2] * w2)];\n      return rgb;\n    }\n  }, {\n    key: \"getSortedValues\",\n    value: function getSortedValues(uniq) {\n      var occurs = Object.keys(uniq).map(function (key) {\n        var rgbaKey = key;\n        var components = key.split('|'),\n            brightness = (components[0] * 299 + components[1] * 587 + components[2] * 114) / 1000;\n        return {\n          rgba: rgbaKey.split('|'),\n          occurs: uniq[key],\n          brightness: brightness\n        };\n      }).sort(function (a, b) {\n        return a.occurs - b.occurs;\n      }).reverse().slice(0, 10);\n      return occurs.sort(function (a, b) {\n        return a.brightness - b.brightness;\n      }).reverse();\n    }\n  }, {\n    key: \"getTextProperty\",\n    value: function getTextProperty(top) {\n      var rgb = this.getMiddleRGB(top[0].rgba.slice(0, 3), top[1].rgba.slice(0, 3));\n      var o = Math.round((parseInt(rgb[0]) * 299 + parseInt(rgb[1]) * 587 + parseInt(rgb[2]) * 114) / 1000);\n\n      if (o > 125) {\n        return 'color: #000';\n      } else {\n        return 'color: #fff';\n      }\n    }\n  }, {\n    key: \"getTopValues\",\n    value: function getTopValues(uniq) {\n      var sorted = this.getSortedValues(uniq);\n      return [sorted[0], sorted[sorted.length - 1]];\n    }\n  }, {\n    key: \"getUniqValues\",\n    value: function getUniqValues(chunked) {\n      return chunked.reduce(function (accum, current) {\n        var key = current.join('|');\n\n        if (!accum[key]) {\n          accum[key] = 1;\n          return accum;\n        }\n\n        accum[key] = ++accum[key];\n        return accum;\n      }, {});\n    }\n  }, {\n    key: \"renderGradient\",\n    value: function renderGradient() {\n      var ls = window.localStorage;\n      var item_name = \"grade-\".concat(this.image.getAttribute('src'));\n      var top = null;\n\n      if (ls && ls.getItem(item_name)) {\n        top = JSON.parse(ls.getItem(item_name));\n      } else {\n        var chunked = this.getChunkedImageData();\n        top = this.getTopValues(this.getUniqValues(chunked));\n\n        if (ls) {\n          ls.setItem(item_name, JSON.stringify(top));\n        }\n      }\n\n      if (this.callback) {\n        this.gradientData = top;\n        return;\n      }\n\n      var gradientProperty = this.getCSSGradientProperty(top);\n      var textProperty = this.getTextProperty(top);\n      var style = \"\".concat(this.container.getAttribute('style') || '', \"; \").concat(gradientProperty, \"; \").concat(textProperty);\n      this.container.setAttribute('style', style);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.canvas.width = this.imageDimensions.width;\n      this.canvas.height = this.imageDimensions.height;\n      this.ctx.drawImage(this.image, 0, 0, this.imageDimensions.width, this.imageDimensions.height);\n      this.getImageData();\n      this.renderGradient();\n    }\n  }]);\n\n  return Grade;\n}();\n\nmodule.exports = function (containers, img_selector, callback) {\n  var init = function init(container, img_selector, callback) {\n    var grade = new Grade(container, img_selector, callback),\n        gradientData = grade.gradientData;\n\n    if (!gradientData.length) {\n      return null;\n    }\n\n    return {\n      element: container,\n      gradientData: gradientData\n    };\n  };\n\n  var results = (NodeList.prototype.isPrototypeOf(containers) ? Array.from(containers).map(function (container) {\n    return init(container, img_selector, callback);\n  }) : [init(containers, img_selector, callback)]).filter(Boolean);\n\n  if (results.length) {\n    return callback(results);\n  }\n};","map":{"version":3,"names":["prefixes","Grade","container","img_selector","callback","image","querySelector","gradientData","canvas","document","createElement","ctx","getContext","imageDimensions","width","height","imageData","readImage","render","getImageData","data","Array","from","perChunk","chunked","reduce","ar","it","i","ix","Math","floor","push","filtered","filter","rgba","slice","every","val","top","map","color","index","join","getRGBAGradientValues","prefix","concat","start","end","w","w1","w2","rgb","parseInt","uniq","occurs","Object","keys","key","rgbaKey","components","split","brightness","sort","a","b","reverse","getMiddleRGB","o","round","sorted","getSortedValues","length","accum","current","ls","window","localStorage","item_name","getAttribute","getItem","JSON","parse","getChunkedImageData","getTopValues","getUniqValues","setItem","stringify","gradientProperty","getCSSGradientProperty","textProperty","getTextProperty","style","setAttribute","drawImage","renderGradient","module","exports","containers","init","grade","element","results","NodeList","prototype","isPrototypeOf","Boolean"],"sources":["C:/Users/safdaaf/Desktop/Bootcamp(Multiverse)/Music-player-reactjs/node_modules/grade-js/src/index.js"],"sourcesContent":["const prefixes = ['webkit'];\n\nclass Grade {\n    constructor(container, img_selector, callback) {\n        this.callback = callback || null\n        this.container = container;\n        this.image = this.container.querySelector(img_selector) || this.container.querySelector('img')\n        this.gradientData = []\n        if(!this.image || !this.container){\n            return\n        }\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.imageDimensions = {\n            width: 0,\n            height: 0\n        };\n        this.imageData = [];\n        this.readImage()\n    }\n\n    readImage() {\n        this.imageDimensions.width = this.image.width * 0.1;\n        this.imageDimensions.height = this.image.height * 0.1;\n        this.render()\n    }\n\n    getImageData() {\n        let imageData = this.ctx.getImageData(\n            0, 0, this.imageDimensions.width, this.imageDimensions.height\n        ).data;\n        this.imageData = Array.from(imageData)\n    }\n\n    getChunkedImageData() {\n        const perChunk = 4;\n\n        let chunked = this.imageData.reduce((ar, it, i) => {\n            const ix = Math.floor(i / perChunk)\n            if (!ar[ix]) {\n                ar[ix] = []\n            }\n            ar[ix].push(it);\n            return ar\n        }, []);\n\n        let filtered = chunked.filter(rgba => {\n            return rgba.slice(0, 2).every(val => val < 250) && rgba.slice(0, 2).every(val => val > 0)\n        });\n\n        return filtered\n    }\n\n    getRGBAGradientValues(top) {\n        return top.map((color, index) => {\n            return `rgb(${color.rgba.slice(0, 3).join(',')}) ${index == 0 ? '0%' : '75%'}`\n        }).join(',')\n    }\n\n    getCSSGradientProperty(top) {\n        const val = this.getRGBAGradientValues(top);\n        return prefixes.map(prefix => {\n            return `background-image: -${prefix}-linear-gradient(\n                        135deg,\n                        ${val}\n                    )`\n        }).concat([`background-image: linear-gradient(\n                    135deg,\n                    ${val}\n                )`]).join(';')\n    }\n\n    getMiddleRGB(start, end) {\n        let w = 0.5 * 2 - 1;\n        let w1 = (w + 1) / 2.0;\n        let w2 = 1 - w1;\n        let rgb = [parseInt(start[0] * w1 + end[0] * w2), parseInt(start[1] * w1 + end[1] * w2), parseInt(start[2] * w1 + end[2] * w2)];\n        return rgb;\n    }\n\n    getSortedValues(uniq) {\n        const occurs = Object.keys(uniq).map(key => {\n                const rgbaKey = key;\n                let components = key.split('|'),\n                    brightness = ((components[0] * 299) + (components[1] * 587) + (components[2] * 114)) / 1000\n                return {\n                    rgba: rgbaKey.split('|'),\n                    occurs: uniq[key],\n                    brightness\n                }\n            }).sort((a, b) => a.occurs - b.occurs).reverse().slice(0, 10);\n        return occurs.sort((a, b) => a.brightness - b.brightness).reverse()\n    }\n\n    getTextProperty(top) {\n        let rgb = this.getMiddleRGB(top[0].rgba.slice(0,3), top[1].rgba.slice(0,3));\n        let o = Math.round(((parseInt(rgb[0]) * 299) + (parseInt(rgb[1]) * 587) + (parseInt(rgb[2]) * 114)) /1000);\n        if (o > 125) {\n            return 'color: #000';\n        } else { \n            return 'color: #fff';\n        }\n    }\n\n    getTopValues(uniq) {\n        let sorted = this.getSortedValues(uniq);\n        return [sorted[0], sorted[sorted.length - 1]]\n    }\n\n    getUniqValues(chunked) {\n        return chunked.reduce((accum, current) => {\n            let key = current.join('|');\n            if (!accum[key]) {\n                accum[key] = 1;\n                return accum\n            }\n            accum[key] = ++(accum[key]);\n            return accum\n        }, {})\n    }\n\n    renderGradient() {\n        const ls = window.localStorage;\n        const item_name = `grade-${this.image.getAttribute('src')}`;\n        let top = null;\n\n        if (ls && ls.getItem(item_name)) {\n            top = JSON.parse(ls.getItem(item_name));\n        } else {\n            let chunked = this.getChunkedImageData();\n            top = this.getTopValues(this.getUniqValues(chunked));\n\n            if (ls) {\n                ls.setItem(item_name, JSON.stringify(top));\n            }\n        }\n\n        if(this.callback){\n            this.gradientData = top\n            return\n        }\n\n        let gradientProperty = this.getCSSGradientProperty(top);\n\n        let textProperty = this.getTextProperty(top);\n\n        let style = `${this.container.getAttribute('style') || ''}; ${gradientProperty}; ${textProperty}`;\n        this.container.setAttribute('style', style)\n    }\n\n    render() {\n        this.canvas.width = this.imageDimensions.width;\n        this.canvas.height = this.imageDimensions.height;\n        this.ctx.drawImage(this.image, 0, 0, this.imageDimensions.width, this.imageDimensions.height);\n        this.getImageData();\n        this.renderGradient();\n    }\n}\n\nmodule.exports = (containers, img_selector, callback) => {\n    const init = (container, img_selector, callback) => {\n        let grade = new Grade(container, img_selector, callback),\n            gradientData = grade.gradientData\n        if(!gradientData.length){\n            return null\n        }\n        return {\n            element: container,\n            gradientData\n        }\n    }\n    let results = (NodeList.prototype.isPrototypeOf(containers)\n    ? Array.from(containers).map(container => init(container, img_selector, callback))\n    : [init(containers, img_selector, callback)]).filter(Boolean)\n\n    if(results.length){\n        return callback(results)\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}